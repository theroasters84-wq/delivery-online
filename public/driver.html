<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Driver Panel - The Roasters</title>
    <link rel="manifest" href="/manifest.json">
    <style>
        body { font-family: 'Segoe UI', sans-serif; text-align: center; background: #121212; color: white; padding: 20px; margin: 0; }
        .container { max-width: 400px; margin: auto; }
        
        /* ÎšÎ¬ÏÏ„Î± Î Î±ÏÎ±Î³Î³ÎµÎ»Î¯Î±Ï‚ Î¼Îµ Î­Î½Ï„Î¿Î½Î¿ ÎµÏ†Î­ */
        .order-card { 
            background: #1e1e1e; padding: 30px; border-radius: 20px; 
            border: 5px solid #ff0000; margin-top: 20px; 
            animation: pulse-border 1s infinite;
        }
        @keyframes pulse-border {
            0% { box-shadow: 0 0 0 0px rgba(255, 0, 0, 0.7); }
            100% { box-shadow: 0 0 0 20px rgba(255, 0, 0, 0); }
        }

        input, button { padding: 15px; width: 90%; border-radius: 12px; margin-bottom: 15px; border: none; font-size: 1.1em; }
        input { background: #222; color: white; border: 1px solid #444; }
        
        .btn-login { background: #00ff00; color: black; font-weight: bold; cursor: pointer; }
        .btn-accept { background: #00ff00; color: black; font-weight: bold; font-size: 1.4em; cursor: pointer; }
        .btn-logout { background: #444; color: #bbb; width: auto; padding: 8px 15px; font-size: 0.8em; margin-top: 10px; }
        
        #status { color: #888; margin-top: 5px; }
        .blink-text { animation: blinker 1s linear infinite; color: #ff0000; font-weight: bold; }
        @keyframes blinker { 50% { opacity: 0; } }
    </style>
</head>
<body>

    <div class="container">
        <h1>The Roasters â˜•</h1>

        <div id="login-section">
            <p>Î•Î¹ÏƒÎ¬Î³ÎµÏ„Îµ Ï„Î¿ ÏŒÎ½Î¿Î¼Î¬ ÏƒÎ±Ï‚:</p>
            <input type="text" id="driver-name" placeholder="ÎŒÎ½Î¿Î¼Î±...">
            <button class="btn-login" onclick="login()">Î•ÎÎ•Î¡Î“ÎŸÎ ÎŸÎ™Î—Î£Î— & Î—Î§ÎŸÎ£</button>
        </div>

        <div id="profile-section" style="display:none;">
            <h2 id="welcome" style="margin-bottom:0;"></h2>
            <button class="btn-logout" onclick="logout()">Î‘Î»Î»Î±Î³Î® ÎŸÎ½ÏŒÎ¼Î±Ï„Î¿Ï‚ (Logout)</button>
            <p id="status">ğŸ”µ Î£Ï…Î½Î´ÎµÎ´ÎµÎ¼Î­Î½Î¿Ï‚...</p>
        </div>

        <div id="orders"></div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();
        let myName = localStorage.getItem('driverName');
        // Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î¿ÏÎ¼Îµ Î­Î½Î±Î½ Ï€Î¹Î¿ Î´Ï…Î½Î±Ï„ÏŒ Î®Ï‡Î¿ ÏƒÎµÎ¹ÏÎ®Î½Î±Ï‚
        const alertAudio = new Audio('https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3');

        // ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚ Î±Î½ ÎµÎ¯Î½Î±Î¹ Î®Î´Î· ÏƒÏ…Î½Î´ÎµÎ´ÎµÎ¼Î­Î½Î¿Ï‚
        if (myName) {
            document.getElementById('driver-name').value = myName;
        }

        function login() {
            const inputName = document.getElementById('driver-name').value;
            if (!inputName) return alert("Î Î±ÏÎ±ÎºÎ±Î»Ï Î²Î¬Î»Îµ Î­Î½Î± ÏŒÎ½Î¿Î¼Î±!");
            
            myName = inputName;
            localStorage.setItem('driverName', myName);
            
            // "ÎÎµÎºÎ»ÎµÎ¹Î´ÏÎ½Î¿Ï…Î¼Îµ" Ï„Î¿Î½ Î®Ï‡Î¿ Î³Î¹Î± Ï„Î¿Î½ browser
            alertAudio.play().then(() => {
                alertAudio.pause();
                alertAudio.currentTime = 0;
            }).catch(e => console.log("Audio unlock failed"));

            socket.emit('driver-login', myName);
            showDriverInterface();
            
            if ("Notification" in window) {
                Notification.requestPermission();
            }
        }

        function showDriverInterface() {
            document.getElementById('login-section').style.display = "none";
            document.getElementById('profile-section').style.display = "block";
            document.getElementById('welcome').innerText = "ğŸŸ¢ " + myName;
            document.getElementById('status').innerText = "Î‘Î½Î±Î¼Î¿Î½Î® Î³Î¹Î± Ï€Î±ÏÎ±Î³Î³ÎµÎ»Î¯ÎµÏ‚...";
        }

        function logout() {
            if(confirm("Î˜Î­Î»ÎµÏ„Îµ Î½Î± Î±Ï€Î¿ÏƒÏ…Î½Î´ÎµÎ¸ÎµÎ¯Ï„Îµ;")) {
                localStorage.removeItem('driverName');
                location.reload();
            }
        }

        // Î›Î®ÏˆÎ· ÎÎ­Î±Ï‚ Î Î±ÏÎ±Î³Î³ÎµÎ»Î¯Î±Ï‚
        socket.on('
