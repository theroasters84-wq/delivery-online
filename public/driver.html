<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8" />
  <title>ÎÏ„ÎµÎ»Î¹Î²ÎµÏÎ¬Ï‚</title>
  <script src="/socket.io/socket.io.js"></script>
  <style>
    body {
      margin:0;
      font-family: Arial, sans-serif;
      background:#000;
      color:#fff;
      display:flex;
      justify-content:center;
      align-items:center;
      height:100vh;
    }
    .box {
      text-align:center;
      width:90%;
      max-width:400px;
    }
    input {
      width:100%;
      padding:15px;
      font-size:20px;
      margin-bottom:10px;
      text-align:center;
    }
    button {
      width:100%;
      padding:15px;
      font-size:22px;
      background:#1abc9c;
      border:none;
      color:#000;
      cursor:pointer;
    }
    #call {
      display:none;
    }
    #call h1 {
      font-size:40px;
      margin-bottom:20px;
    }
    #accept {
      background:red;
      color:white;
      font-size:30px;
    }
  </style>
</head>
<body>

<div class="box">

  <!-- LOGIN -->
  <div id="login">
    <h2>ÎŒÎ½Î¿Î¼Î± Î½Ï„ÎµÎ»Î¹Î²ÎµÏÎ¬</h2>
    <input id="name" placeholder="Î³ÏÎ¬ÏˆÎµ ÏŒÎ½Î¿Î¼Î±" />
    <button onclick="login()">Î£ÏÎ½Î´ÎµÏƒÎ·</button>
  </div>

  <!-- CALL SCREEN -->
  <div id="call">
    <h1>ğŸ“¢ Î£Î• ÎšÎ‘Î›ÎŸÎ¥Î</h1>
    <button id="accept" onclick="accept()">Î¤ÎŸ Î Î—Î¡Î‘</button>
  </div>

</div>

<audio id="sound" src="sounds/alert.mp3" loop></audio>

<script>
  const socket = io();
  const sound = document.getElementById("sound");

  function login() {
    const name = document.getElementById("name").value.trim();
    if (!name) return alert("Î’Î¬Î»Îµ ÏŒÎ½Î¿Î¼Î±");
    socket.emit("register-driver", name);
    document.getElementById("login").style.display = "none";
    document.body.style.background = "#111";
  }

  socket.on("ring", () => {
    document.getElementById("call").style.display = "block";
    sound.play();
  });

  function accept() {
    sound.pause();
    sound.currentTime = 0;
    document.getElementById("call").style.display = "none";
    socket.emit("driver-accepted");
  }
</script>

</body>
</html>
