<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shop Panel - The Roasters</title>
    <style>
        body { font-family: sans-serif; text-align: center; background: #f4f4f4; padding: 20px; }
        .driver-box { background: white; padding: 15px; margin: 10px; border-radius: 10px; display: flex; justify-content: space-between; align-items: center; border: 1px solid #ddd; }
        button.call { background: #e67e22; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; }
        button.cancel { background: #c0392b; color: white; border: none; padding: 15px 30px; border-radius: 10px; margin-top: 20px; cursor: pointer; }
        #log { margin-top: 20px; padding: 10px; background: #eee; border-radius: 5px; }
    </style>
</head>
<body>
    <h1>The Roasters - ÎšÎµÎ½Ï„ÏÎ¹ÎºÏŒ</h1>
    
    <h3>Î•Î½ÎµÏÎ³Î¿Î¯ ÎÏ„ÎµÎ»Î¹Î²ÎµÏÎ¬Î´ÎµÏ‚:</h3>
    <div id="driver-list">Î ÎµÏÎ¹Î¼Î­Î½Ï‰ ÏƒÏ…Î½Î´Î­ÏƒÎµÎ¹Ï‚...</div>

    <button class="cancel" onclick="cancelAll()">âœ– Î‘ÎšÎ¥Î¡Î©Î£Î— ÎŸÎ›Î©Î Î¤Î©Î ÎšÎ›Î—Î£Î•Î©Î</button>

    <div id="log"></div>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();

        socket.on('update-drivers', (drivers) => {
            const list = document.getElementById('driver-list');
            list.innerHTML = "";
            for (let id in drivers) {
                list.innerHTML += `
                    <div class="driver-box">
                        <span><strong>${drivers[id]}</strong></span>
                        <button class="call" onclick="callDriver('${id}', '${drivers[id]}')">ğŸ”” ÎšÎ›Î—Î£Î—</button>
                    </div>
                `;
            }
        });

        function callDriver(id, name) {
            const time = new Date().toLocaleTimeString();
            socket.emit('call-driver', { driverId: id, time: time });
            document.getElementById('log').innerHTML = `<p>ÎšÎ±Î»Î¿ÏÎ¼Îµ Ï„Î¿Î½ ${name}...</p>`;
        }

        function cancelAll() {
            socket.emit('cancel-order');
            document.getElementById('log').innerHTML = `<p style="color:red;">Î— ÎºÎ»Î®ÏƒÎ· Î±ÎºÏ…ÏÏÎ¸Î·ÎºÎµ!</p>`;
        }

        socket.on('driver-accepted', (data) => {
            document.getElementById('log').innerHTML = `<h2 style="color:green;">âœ… ÎŸ ${data.driverName} Î­ÏÏ‡ÎµÏ„Î±Î¹!</h2>`;
        });
    </script>
</body>
</html>
