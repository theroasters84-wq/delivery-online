<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <title>Shop</title>
    <style>
        body { font-family: sans-serif; text-align: center; padding: 20px; background: #eee; }
        .driver-card { background: white; padding: 15px; margin: 10px; border-radius: 10px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .btn-send { background: #28a745; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; font-weight: bold; }
    </style>
</head>
<body>
    <h1>ğŸª Î”Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ· Shop</h1>
    <input type="text" id="shopName" placeholder="ÎŒÎ½Î¿Î¼Î± ÎœÎ±Î³Î±Î¶Î¹Î¿Ï" style="padding:10px;">
    <button onclick="connect()" style="padding:10px;">Î£ÏÎ½Î´ÎµÏƒÎ·</button>

    <div id="list" style="max-width: 400px; margin: 20px auto;"></div>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();
        function connect() {
            const s = document.getElementById('shopName').value.toLowerCase();
            socket.emit('shop-login', { shop: s });
            document.getElementById('shopName').disabled = true;
        }

        socket.on('driver-status', (data) => {
            if(data.status === 'online') {
                const div = document.createElement('div');
                div.id = data.socketId;
                div.className = 'driver-card';
                div.innerHTML = `<span>ğŸ›µ ${data.name}</span> <button class="btn-send" onclick="send('${data.socketId}', '${data.name}')">Î‘Î ÎŸÎ£Î¤ÎŸÎ›Î—</button>`;
                document.getElementById('list').appendChild(div);
            } else {
                const el = document.getElementById(data.socketId);
                if(el) el.remove();
            }
        });

        function send(id, name) {
            const s = document.getElementById('shopName').value.toLowerCase();
            socket.emit('send-private-order', { targetId: id, shop: s });
            console.log("Î£Ï„Î¬Î»Î¸Î·ÎºÎµ ÏƒÏ„Î¿Î½ " + name);
        }

        socket.on('order-confirmed', (data) => {
            alert("âœ… ÎŸ Î¿Î´Î·Î³ÏŒÏ‚ " + data.driverName + " Ï„Î·Î½ Î´Î­Ï‡Ï„Î·ÎºÎµ!");
        });
    </script>
</body>
</html>
