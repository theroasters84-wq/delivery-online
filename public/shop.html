<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shop Panel</title>
    <style>
        body { background: #1a1a1a; color: #fff; font-family: sans-serif; text-align: center; padding: 20px; }
        .card { background: #222; padding: 20px; border-radius: 15px; max-width: 400px; margin: auto; }
        .btn { background: #ffc107; color: #000; padding: 20px; border-radius: 12px; font-weight: 900; width: 100%; border: none; cursor: pointer; font-size: 1.2em; }
        input { width: 90%; padding: 12px; margin: 10px 0; background: #000; color: #fff; border: 1px solid #444; text-align: center; }
        #status { margin-top: 20px; padding: 15px; border-radius: 10px; background: #333; }
        .online-list { color: #ffc107; font-weight: bold; margin: 10px 0; }
    </style>
</head>
<body>

    <div class="card">
        <h1>ROASTERS SHOP</h1>
        <div id="setup">
            <input type="text" id="sName" placeholder="ÎœÎ‘Î“Î‘Î–Î™">
            <input type="password" id="sPass" placeholder="ÎšÎ©Î”Î™ÎšÎŸÎ£ (1234)">
            <button class="btn" onclick="save()">Î•Î™Î£ÎŸÎ”ÎŸÎ£</button>
        </div>

        <div id="controls" style="display:none;">
            <div class="online-list">ÎŸÎ´Î·Î³Î¿Î¯: <span id="list">-</span></div>
            <button class="btn" onclick="send()">ðŸš€ Î£Î¤Î•Î™Î›Î• Î Î‘Î¡Î‘Î“Î“Î•Î›Î™Î‘</button>
            <div id="status">Î‘Î½Î±Î¼Î¿Î½Î®...</div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();
        function save() {
            const d = { shop: document.getElementById('sName').value, password: document.getElementById('sPass').value, name: 'SHOP', isDriver: false };
            localStorage.setItem('shop_auth', JSON.stringify(d));
            location.reload();
        }

        socket.on('update-drivers', (list) => { document.getElementById('list').innerText = list.length > 0 ? list.join(', ') : 'ÎšÎ±Î½Î­Î½Î±Ï‚'; });

        function send() {
            const auth = JSON.parse(localStorage.getItem('shop_auth'));
            socket.emit('new-order', { shopName: auth.shop });
            document.getElementById('status').innerText = "ðŸ“¡ Î£Ï„Î¬Î»Î¸Î·ÎºÎµ! Î ÎµÏÎ¹Î¼Î­Î½Î¿Ï…Î¼Îµ Î±Ï€Î¿Î´Î¿Ï‡Î®...";
            document.getElementById('status').style.background = "#333";
        }

        socket.on('order-confirmed', (data) => {
            document.getElementById('status').innerText = `âœ… ÎŸ ${data.driverName} Î¤Î—Î Î Î—Î¡Î•!`;
            document.getElementById('status').style.background = "#28a745";
        });

        window.onload = () => {
            const auth = localStorage.getItem('shop_auth');
            if(auth) {
                document.getElementById('setup').style.display = 'none';
                document.getElementById('controls').style.display = 'block';
                socket.emit('login', JSON.parse(auth));
            }
        };
    </script>
</body>
</html>
