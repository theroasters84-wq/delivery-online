<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shop Panel - The Roasters</title>
    <style>
        body { font-family: sans-serif; text-align: center; background: #f4f4f4; padding: 20px; }
        .driver-box { background: white; padding: 15px; margin: 10px; border-radius: 10px; display: flex; justify-content: space-between; align-items: center; border: 1px solid #ddd; }
        button.call { background: #e67e22; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; font-weight: bold; }
        #status-display { margin-top: 20px; padding: 20px; border-radius: 10px; font-size: 1.5em; background: #ddd; }
        .success { background: #27ae60 !important; color: white; }
    </style>
</head>
<body>
    <h1>The Roasters - ÎšÎµÎ½Ï„ÏÎ¹ÎºÏŒ</h1>
    <div id="driver-list">Î ÎµÏÎ¹Î¼Î­Î½Ï‰ Î½Ï„ÎµÎ»Î¹Î²ÎµÏÎ¬Î´ÎµÏ‚...</div>
    
    <div id="status-display">ÎšÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·: Î‘Î½Î±Î¼Î¿Î½Î®...</div>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();
        const statusDisplay = document.getElementById('status-display');

        socket.on('update-drivers', (drivers) => {
            const list = document.getElementById('driver-list');
            list.innerHTML = "";
            for (let id in drivers) {
                list.innerHTML += `
                    <div class="driver-box">
                        <span><strong>${drivers[id]}</strong></span>
                        <button class="call" onclick="callDriver('${id}', '${drivers[id]}')">ğŸ”” ÎšÎ›Î—Î£Î—</button>
                    </div>`;
            }
        });

        function callDriver(id, name) {
            const time = new Date().toLocaleTimeString();
            socket.emit('call-driver', { driverId: id, time: time });
            statusDisplay.innerText = "ÎšÎ±Î»Î¿ÏÎ¼Îµ Ï„Î¿Î½ " + name + "...";
            statusDisplay.className = "";
        }

        // Î•Î”Î© Î•Î™ÎÎ‘Î™ Î— Î›Î—Î¨Î— Î¤Î—Î£ Î‘Î ÎŸÎ”ÎŸÎ§Î—Î£
        socket.on('driver-accepted', (data) => {
            statusDisplay.innerText = "âœ… ÎŸ " + data.driverName + " Î‘Î ÎŸÎ”Î•Î§Î¤Î—ÎšÎ•!";
            statusDisplay.className = "success";
            // Î Î±Î¯Î¶ÎµÎ¹ ÎºÎ±Î¹ Î­Î½Î±Î½ Î®Ï‡Î¿ ÏƒÏ„Î¿ Î¼Î±Î³Î±Î¶Î¯ Î³Î¹Î± Î½Î± Ï„Î¿ ÎºÎ±Ï„Î±Î»Î¬Î²Î¿Ï…Î½
            new Audio('https://actions.google.com/sounds/v1/notifications/positive_notification.ogg').play();
        });
    </script>
</body>
</html>
