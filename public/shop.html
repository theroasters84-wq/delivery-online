<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Roasters - Shop Panel</title>
    
    <link rel="icon" type="image/png" href="https://cdn-icons-png.flaticon.com/512/924/924514.png">

    <style>
        body { font-family: 'Segoe UI', sans-serif; text-align: center; background: #f0f2f5; padding: 20px; margin: 0; }
        .container { max-width: 600px; margin: auto; background: white; padding: 25px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        h1 { color: #1a1a1a; margin-bottom: 30px; border-bottom: 2px solid #eee; padding-bottom: 10px; }
        
        /* Î›Î¯ÏƒÏ„Î± ÎÏ„ÎµÎ»Î¹Î²ÎµÏÎ¬Î´Ï‰Î½ */
        .driver-box { 
            background: #fff; 
            padding: 20px; 
            margin: 15px 0; 
            border-radius: 15px; 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            border: 2px solid #eaeaea;
            transition: all 0.3s ease;
        }
        .driver-box:hover { border-color: #e67e22; transform: translateY(-2px); }
        .driver-name { font-size: 1.3em; font-weight: bold; color: #333; }
        
        /* ÎšÎ¿Ï…Î¼Ï€Î¯ ÎšÎ»Î®ÏƒÎ·Ï‚ */
        .btn-call { 
            background: #e67e22; 
            color: white; 
            border: none; 
            padding: 12px 25px; 
            border-radius: 10px; 
            cursor: pointer; 
            font-weight: bold; 
            font-size: 1em;
            box-shadow: 0 4px #d35400;
        }
        .btn-call:active { transform: translateY(2px); box-shadow: none; }

        /* ÎŸÎ¸ÏŒÎ½Î· ÎšÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·Ï‚ */
        #status-display { 
            margin-top: 30px; 
            padding: 30px; 
            border-radius: 15px; 
            font-size: 1.5em; 
            font-weight: bold;
            background: #ffffff; 
            color: #999;
            border: 4px dashed #ddd;
            transition: all 0.4s ease;
        }

        /* Î£Ï„Ï…Î» ÏŒÏ„Î±Î½ Î¿ Î½Ï„ÎµÎ»Î¹Î²ÎµÏÎ¬Ï‚ Î±Ï€Î¿Î´Î­Ï‡ÎµÏ„Î±Î¹ */
        .status-accepted { 
            background: #27ae60 !important; 
            color: white !important; 
            border: 4px solid #1e8449 !important;
            animation: bounce 0.6s ease;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .no-drivers { color: #bbb; padding: 40px; font-style: italic; }
    </style>
</head>
<body>

    <div class="container">
        <h1>The Roasters - Shop Panel â˜•</h1>
        
        <div id="driver-list">
            <p class="no-drivers">Î‘Î½Î±Î¼Î¿Î½Î® Î³Î¹Î± ÏƒÏÎ½Î´ÎµÏƒÎ· Î½Ï„ÎµÎ»Î¹Î²ÎµÏÎ¬Î´Ï‰Î½...</p>
        </div>
        
        <div id="status-display">
            Î•Î¤ÎŸÎ™ÎœÎŸ Î“Î™Î‘ ÎšÎ›Î—Î£Î—
        </div>
    </div>

    <audio id="success-sound" src="https://actions.google.com/sounds/v1/notifications/positive_notification.ogg"></audio>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();
        const statusDisplay = document.getElementById('status-display');
        const driverList = document.getElementById('driver-list');
        const successSound = document.getElementById('success-sound');

        // Î›Î®ÏˆÎ· Î»Î¯ÏƒÏ„Î±Ï‚ ÎµÎ½ÎµÏÎ³ÏÎ½ Î½Ï„ÎµÎ»Î¹Î²ÎµÏÎ¬Î´Ï‰Î½
        socket.on('update-drivers', (drivers) => {
            if (Object.keys(drivers).length === 0) {
                driverList.innerHTML = '<p class="no-drivers">âŒ ÎšÎ±Î½Î­Î½Î±Ï‚ Î½Ï„ÎµÎ»Î¹Î²ÎµÏÎ¬Ï‚ online</p>';
                return;
            }

            driverList.innerHTML = "";
            for (let id in drivers) {
                driverList.innerHTML += `
                    <div class="driver-box">
                        <span class="driver-name">ğŸ‘¤ ${drivers[id]}</span>
                        <button class="btn-call" onclick="callDriver('${id}', '${drivers[id]}')">ğŸ”” ÎšÎ›Î—Î£Î—</button>
                    </div>`;
            }
        });

        // Î•Î½Î­ÏÎ³ÎµÎ¹Î± ÏŒÏ„Î±Î½ Ï€Î±Ï„Î¬Î¼Îµ "ÎšÎ»Î®ÏƒÎ·"
        function callDriver(id, name) {
            const time = new Date().toLocaleTimeString('el-GR', { hour: '2-digit', minute: '2-digit' });
            socket.emit('call-driver', { driverId: id, time: time });
            
            statusDisplay.innerText = "ÎšÎ±Î»Î¿ÏÎ¼Îµ Ï„Î¿Î½ " + name + "...";
            statusDisplay.classList.remove('status-accepted');
            statusDisplay.style.color = "#856404";
            statusDisplay.style.background = "#fff3cd";
            statusDisplay.style.borderColor = "#ffeeba";
        }

        // Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ· ÏŒÏ„Î±Î½ Î¿ Î½Ï„ÎµÎ»Î¹Î²ÎµÏÎ¬Ï‚ Ï€Î±Ï„Î®ÏƒÎµÎ¹ "Î‘Ï€Î¿Î´Î¿Ï‡Î®"
        socket.on('driver-accepted', (data) => {
            statusDisplay.innerText = "âœ… ÎŸ " + data.driverName + " Î‘Î ÎŸÎ”Î•Î§Î¤Î—ÎšÎ•!";
            statusDisplay.classList.add('status-accepted');
            
            // Î Î±Î¯Î¶ÎµÎ¹ Î®Ï‡Î¿ ÏƒÏ„Î¿ Î¼Î±Î³Î±Î¶Î¯
            successSound.play();

            // Î•Ï€Î±Î½Î±Ï†Î¿ÏÎ¬ ÏƒÏ„Î·Î½ Î±ÏÏ‡Î¹ÎºÎ® ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ· Î¼ÎµÏ„Î¬ Î±Ï€ÏŒ 10 Î´ÎµÏ…Ï„ÎµÏÏŒÎ»ÎµÏ€Ï„Î±
            setTimeout(() => {
                statusDisplay.innerText = "Î•Î¤ÎŸÎ™ÎœÎŸ Î“Î™Î‘ ÎšÎ›Î—Î£Î—";
                statusDisplay.classList.remove('status-accepted');
                statusDisplay.style.background = "#ffffff";
                statusDisplay.style.color = "#999";
                statusDisplay.style.borderColor = "#ddd";
            }, 10000);
        });
    </script>
</body>
</html>
